# be-chess

소프티어 부트캠프 2기 체스 프로젝트

## step 1 폰 생성

> **키워드**
> <br>JUnit을 활용한 테스트 코드 작성

**구현 기능**

- Pawn 테스트 클래스
    - Pawn 생성 테스트 메소드 추가
- Pawn 클래스
    - 생성자 및 getter 구현
- Pawn 생성 테스트 메소드 리팩토링

## step 2 체스판 생성

> **키워드**
> <br>JCF를 이용한 객체 관리

**구현 기능**

- Pawn 클래스 변경
    - 생성자 매개변수에 기본값 설정
    - 상수 추가
- Board 테스트 클래스
    - Board에 Pawn을 추가하는 테스트
    - Board에 Pawn 이외의 객체가 추가되지 않도록 테스트
- 리팩토링
    - 패키지 리팩토링
    - 중복 제거 ➡️ `@Before` 활용

## step 3 체스판 초기화

> **키워드**
> <br>JCF를 이용한 객체 관리

**구현 기능**

- 체스판 초기화
    - 색상별 Pawn 출력 문자 부여 & Pawn 열 조회 테스트 추가
    - 8*8 체스판 초기화(Pawn 기물 배치) 및 출력 기능 추가
- 게임 시작 및 종료 기능 추가
    - 체스 게임을 시작하는 Chess 클래스 추가
    - Scanner를 이용해 사용자에게 게임 시작/종료 명령어 입력 받기

## step 4 기물 배치

> **키워드**
> <br>Value Object
> <br>팩토리 메소드
> <br>enum

**구현 기능**

- `StringUtils` 클래스 추가
    - `\n` 문자 제거하기 ➡ `System.getProperty("line.separator")`
    - 유틸리티 메소드 구현 (`appendNewLine()`)
- Pawn ➡ Piece 변경 (일반화)
    - 색상과 이름으로 기물을 구분
    - 색상 구분 메소드 추가
    - value object로 구현 ➡ 팩토리 메소드를 통해서만 생성 가능 & 불변 객체
- 전체 체스판 출력 기능 추가 및 테스트

## step 5 기물 위치 부여 및 점수계산

> **키워드**
> <br>일급 컬렉션
> <br>리팩토링에서 가장 중요한 건 `"최소한의 클래스, 메소드, 중복을 없애는 것"`

**`일급 컬렉션`**

- 다른 객체와 동등한 지위를 갖는 컬렉션 ➡️ 다른 멤버 변수 없이 컬렉션만을 멤버로 가지며 컬렉션을 조작하는 편의 메소드들을 제공하는 클래스
- 도메인 개념을 효과적으로 표현하기 위해 컬렉션의 상태와 행위를 캡슐화한 것

**구현 기능**

- Piece 리팩토링
    - 기물의 색상과 종류를 각각 모두 enum으로 구현
    - 식별 문자(`representation`) 또한 enum에서 관리
    - 색상과 종류에 따라 팩토리 메소드 분리해서 구현해보기 & 중복을 제거하며 리팩토링해보기
- Board 자료구조 개선
    - 체스판의 row를 Rank 클래스로 구현 ➡️ 2차원 배열이 1차원 배열로 변경됨
- Board 기능 추가
    - 특정 색과 종류에 해당하는 기물의 개수를 반환하는 메소드
    - 주어진 위치의 기물을 조회하는 메소드
    - 기물을 체스판에 추가하는 메소드
    - 체스 프로그램 점수를 계산하는 메소드 (점수는 현재 남아 있는 기물에 따름)
    - 기물을 점수를 기준으로 정렬하는 메소드 (내림차순)
- 리팩토링
    - 인터페이스 추출

## step 6 기물 이동 구현

> **키워드**
> <br>`복잡한 요구사항에도 코드품질을 유지하며 코딩하는 연습을 해보자`
> <br>리팩토링 화이팅

**구현 기능**

- 기본적인 이동 기능 (규칙과 상관 없이 무조건 이동이 가능하도록)
- 게임에 move 명령어 추가 (ex: *move b2 be*)
- Board 클래스 구조 개선
    - `복잡도가 예상된 시점에 구조를 개선한 후에 구현을 시작하는 것이 좋다`
    - ChessBoard 클래스 : 체스판의 구성을 관리
    - ChessGame 클래스 : 체스 게임 규칙에 대한 로직을 구현
    - ChessView 클래스 : 체스판을 출력하는 로직
- 기물별 이동 구현
    - 기물을 구분하기 위해 if문을 사용했다면, `다형성을 활용해 if문을 제거할 수 있다`
    - 다형성을 활용해 중복 또한 최대한 제거
    - 이동 방향 및 크기를 나타내는 Direction enum 추가
    - 예외 처리하기

## step 7 예외 처리

> **키워드**
> <br>Exception

**구현 기능**

- 기물 이동 중 발생할 수 있는 에러에 대한 예외 처리
    - `ChessGameException` : 체스 게임 플레이 중 발생하는 예외 (추상 클래스로 나머지 예외들이 이 클래스를 상속)
    - `InvalidCommandException` : 잘못된 명령어 입력 시 발생하는 예외
    - `InvalidDirectionException` : 기물이 이동할 수 없는 방향으로 이동하려는 경우 발생하는 예외
    - `InvalidMovementException` : 이동할 수 없는 위치로 이동하려는 경우 발생하는 예외 (동일한 위치로 이동하려는 경우/같은 편 기물이 있는 곳으로 이동하려는 경우/이동하는 경로를 다른 기물이 막고 경우)
    - `InvalidPieceTypeException` : 유효하지 않은 타입의 기물을 생성하려 하는 경우 발생하는 예외
    - `NoneTypePieceException` : 빈 칸을 선택해 이동시키려 하는 경우 발생하는 예외
    - `OutOfBoardException` : 입력한 위치가 체스판 범위를 벗어나는 경우 발생하는 예외
    - `UnavailablePieceException` : 움직일 수 없는 기물을 움직이려는 경우 발생하는 예외 (상대 편 기물을 움직이는 경우)
 
